<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-100 -100 1040.0 1660.0">
  <style>
    .lane { fill: #f8f9fa; stroke: #dee2e6; stroke-width: 2; }
    .node { fill: #ffffff; stroke: #333333; stroke-width: 2; }
    .label { font-family: sans-serif; font-size: 14px; text-anchor: middle; fill: #333; }
    .edge { fill: none; stroke: #666; stroke-width: 2; }
    path { marker-end: url(#arrow); }
  </style>
  <defs><marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,-5L10,0L0,5" fill="#666"/></marker></defs>
  <rect class="lane" x="0" y="-100" width="300" height="1660.0" />
  <text class="label" x="150.0" y="-70">user</text>
  <rect class="lane" x="300" y="-100" width="300" height="1660.0" />
  <text class="label" x="450.0" y="-70">system</text>
  <rect class="lane" x="600" y="-100" width="300" height="1660.0" />
  <text class="label" x="750.0" y="-70">gateway</text>
  <path class="edge" d="M 150.0,200.0 L 150.0,267.5 L 150.0,267.5 L 150.0,335.0" />
  <path class="edge" d="M 150.0,385.0 L 150.0,470.0 L 450.0,470.0 L 450.0,515.0" />
  <path class="edge" d="M 450.0,565.0 L 450.0,627.5 L 450.0,627.5 L 450.0,690.0" />
  <path class="edge" d="M 450.0,750.0 L 450.0,832.5 L 750.0,832.5 L 750.0,875.0" />
  <path class="edge" d="M 750.0,925.0 L 750.0,990.0 L 750.0,990.0 L 750.0,1055.0" />
  <path class="edge" d="M 750.0,1105.0 L 750.0,1187.5 L 750.0,1187.5 L 750.0,1230.0" />
  <path class="edge" d="M 750.0,1290.0 L 750.0,1335.0 L 450.0,1335.0 L 450.0,1420.0" />
  <path class="edge" d="M 780.0,1260 L 780.0,1200 L 980,1200 L 980,900 L 470.0,900" />
  <path class="edge" d="M 450.0,750.0 L 450.0,795.0 L 450.0,795.0 L 450.0,880.0" />
  <circle class="node" cx="150.0" cy="180" r="20.0" />
  <text class="label" x="150.0" y="220.0">Iniciar checkout</text>
  <rect class="node" x="60.0" y="335.0" width="180" height="50" rx="8" />
  <text class="label" x="150.0" y="365">Preencher dados de pagamento</text>
  <rect class="node" x="360.0" y="515.0" width="180" height="50" rx="8" />
  <text class="label" x="450.0" y="545">Validar dados informados</text>
  <polygon class="node" points="450.0,690.0 480.0,720 450.0,750.0 420.0,720" />
  <text class="label" x="450.0" y="770.0">Dados válidos?</text>
  <rect class="node" x="660.0" y="875.0" width="180" height="50" rx="8" />
  <text class="label" x="750.0" y="905">Enviar pagamento ao gateway</text>
  <rect class="node" x="660.0" y="1055.0" width="180" height="50" rx="8" />
  <text class="label" x="750.0" y="1085">Aguardar resposta do gateway</text>
  <polygon class="node" points="750.0,1230.0 780.0,1260 750.0,1290.0 720.0,1260" />
  <text class="label" x="750.0" y="1310.0">Pagamento aprovado?</text>
  <circle class="node" cx="450.0" cy="1440" r="20.0" />
  <circle cx="450.0" cy="1440" r="16.0" fill="none" stroke="#333" stroke-width="2"/>
  <text class="label" x="450.0" y="1480.0">Compra concluída com sucesso</text>
  <circle class="node" cx="450.0" cy="900" r="20.0" />
  <circle cx="450.0" cy="900" r="16.0" fill="none" stroke="#333" stroke-width="2"/>
  <text class="label" x="450.0" y="940.0">Falha no checkout</text>
</svg>